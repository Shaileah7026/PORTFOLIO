<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport"
        content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Document</title>

    <script type="module" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"></script>
    <style>
        #modelviewer {
            height: 400px;
            width: 600px;
        }
    </style>
</head>

<body>
    <model-viewer id="modelviewer" alt="Ready Player Me Avatar"
        src="https://api.readyplayer.me/v1/avatars/6185a4acfb622cf1cdc49348.glb" shadow-intensity="1" camera-controls
        touch-action="pan-y">
    </model-viewer>
    
    <script>
        const avatar = document.querySelector('#modelviewer');
        const canvas = avatar.shadowRoot.querySelector('.model-viewer-canvas');
        const center = { x: canvas.width / 2, y: canvas.height / 2 };
        const head = avatar.shadowRoot.querySelector('.Head');

        canvas.addEventListener('mousemove', e => {
            const rect = canvas.getBoundingClientRect();
            const x = e.clientX - rect.left;
            const y = e.clientY - rect.top;
            const dx = (x - center.x) / center.x;
            const dy = (y - center.y) / center.y;
            head.style.transform = `rotateX(${dy * 20}deg) rotateY(${dx * -20}deg)`;
        });
    </script>
</body>

</html>
